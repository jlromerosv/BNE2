{#
/**
 * @file
 * Theme override to display a block.
 *
 * Available variables:
 * - resultado: Array con los resultados de archivos de la web.
 *
 * @see template_preprocess_block()
 */
#}

{% if resultado['mensaje_error']|length  %}
	<div class="ps-fulltext-search-list ps-listado-box ps-listado-archivo-web">
		<div class="view-filters">
			<form class="views-exposed-form bef-exposed-form" action="" method="get" id="form-buscar-archivo-web">
				<div class="form--inline clearfix rs_skip rs_preserve">
					<div class="js-form-item form-item js-form-type-textfield form-type-textfield js-form-item-search-api-fulltext form-item-search-api-fulltext">
						<label for="ps-search-text-archivo-web">Buscar</label>
						<input placeholder="INTRODUZCA LA PALABRA DE BÚSQUEDA..." type="text" id="ps-search-text-archivo-web" name="buscar" value="" size="30" maxlength="128" class="form-text">
					</div>
					<div data-drupal-selector="edit-actions" class="form-actions js-form-wrapper form-wrapper" id="edit-actions">
						<input type="submit" id="ps-archivo-web-buscar" value="Buscar" class="button js-form-submit form-submit">
						<input type="submit" id="ps-archivo-web-reload" value="Buscar" class="button js-form-submit form-submit">
					</div>
					<div class="bef--secondary js-form-wrapper form-wrapper" data-drupal-selector="edit-secondary" id="edit-secondary" data-once="details">
						<div class="details-wrapper">
							<div class="title">
								<h2>BUSCAR POR:</H2>
							</div>
							<div class="js-form-item form-item js-form-type-checkbox form-type-checkbox">
								<input type="checkbox" id="ps-archivo-web-todos" checked="checked" name="todos">
								<label for="ps-archivo-web-todos">Todos</label>
							</div>
							<div class="js-form-item form-item js-form-type-checkbox form-type-checkbox">
								<input type="checkbox" id="ps-archivo-web-titulo" name="titulo">
								<label for="ps-archivo-web-titulo">Título</label>
							</div>
							<div class="js-form-item form-item js-form-type-checkbox form-type-checkbox">
								<input type="checkbox" id="ps-archivo-web-palabras-clave" name="palabras-clave">
								<label for="ps-archivo-web-palabras-clave">Palabras clave</label>
							</div>
							<summary class="ayuda-archivo-link" role="button" aria-controls="edit-secondary" aria-expanded="false" aria-pressed="false">
								<a href="/node/30916" target="_blank">

									<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 431.855 431.855" style="enable-background:new 0 0 431.855 431.855;" xml:space="preserve">
										<g>
											<path  d="M215.936,0C96.722,0,0.008,96.592,0.008,215.814c0,119.336,96.714,216.041,215.927,216.041
													c119.279,0,215.911-96.706,215.911-216.041C431.847,96.592,335.214,0,215.936,0z M231.323,335.962
													c-5.015,4.463-10.827,6.706-17.411,6.706c-6.812,0-12.754-2.203-17.826-6.617c-5.08-4.406-7.625-10.575-7.625-18.501
													c0-7.031,2.463-12.949,7.373-17.745c4.91-4.796,10.933-7.194,18.078-7.194c7.031,0,12.949,2.398,17.753,7.194
													c4.796,4.796,7.202,10.713,7.202,17.745C238.858,325.362,236.346,331.5,231.323,335.962z M293.856,180.934
													c-3.853,7.145-8.429,13.306-13.737,18.501c-5.292,5.194-14.81,13.924-28.548,26.198c-3.788,3.463-6.836,6.503-9.12,9.12
													c-2.284,2.626-3.991,5.023-5.105,7.202c-1.122,2.178-1.983,4.357-2.593,6.535c-0.61,2.17-1.528,5.999-2.772,11.469
													c-2.113,11.608-8.754,17.411-19.915,17.411c-5.804,0-10.681-1.894-14.656-5.69c-3.959-3.796-5.934-9.429-5.934-16.907
													c0-9.372,1.455-17.493,4.357-24.361c2.886-6.869,6.747-12.892,11.543-18.086c4.804-5.194,11.274-11.356,19.427-18.501
													c7.145-6.251,12.307-10.965,15.485-14.144c3.186-3.186,5.861-6.73,8.031-10.632c2.187-3.91,3.26-8.145,3.26-12.721
													c0-8.933-3.308-16.46-9.957-22.597c-6.641-6.137-15.209-9.21-25.703-9.21c-12.282,0-21.321,3.097-27.125,9.291
													c-5.804,6.194-10.705,15.314-14.729,27.369c-3.804,12.616-11.006,18.923-21.598,18.923c-6.251,0-11.526-2.203-15.826-6.609
													c-4.292-4.406-6.438-9.177-6.438-14.314c0-10.6,3.406-21.346,10.21-32.23c6.812-10.884,16.745-19.899,29.807-27.036
													c13.054-7.145,28.296-10.722,45.699-10.722c16.184,0,30.466,2.991,42.854,8.966c12.388,5.966,21.963,14.087,28.718,24.361
													c6.747,10.266,10.128,21.427,10.128,33.482C299.635,165.473,297.709,173.789,293.856,180.934z"/>
										</g>
									</svg>
								</a>
								<span class="summary"></span>
							</summary>
							<summary role="button" aria-controls="edit-secondary" aria-expanded="false" aria-pressed="false">
								<a href="http://www.dl-e.es/openwayback/wayback/index.jsp" target="_blank">
									<span>Buscar por URL2</span>
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 14 14">
										<path id="External_Link" d="M18,4.466v4.2a.467.467,0,0,1-.933,0V5.593l-6.67,6.67a.467.467,0,0,1-.66-.66l6.67-6.67H13.334a.467.467,0,0,1,0-.933h4.2A.466.466,0,0,1,18,4.466ZM16.133,16.6V11a.467.467,0,1,0-.933,0v5.6a.467.467,0,0,1-.466.466H5.4a.467.467,0,0,1-.466-.466V7.267A.467.467,0,0,1,5.4,6.8H11a.467.467,0,1,0,0-.933H5.4A1.4,1.4,0,0,0,4,7.267V16.6A1.4,1.4,0,0,0,5.4,18h9.334a1.4,1.4,0,0,0,1.4-1.4Z" transform="translate(-4 -4)" fill="#b40d04"/>
									</svg>
								</a>
								<span class="summary"></span>
							</summary>
							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="materia">Materia</label>
								<input type="text" id="ps-materia" name="materia" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="materias-id">Materias-id</label>
								<input type="text" id="ps-materias-id" name="materias-id" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="ps-coleccion">coleccion</label>
								<input type="text" id="ps-coleccion" name="coleccion" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="colecciones-id">colecciones_id</label>
								<input type="text" id="ps-colecciones-id" name="colecciones-id" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="ps-total-paginas">Total páginas</label>
								<input type="text" id="ps-total-paginas" name="total" value="{{ resultado['total'] }}" size="30" maxlength="128" class="form-text">
							</div>
							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="ps-num-page">Página actual</label>
								<input type="text" id="ps-num-page" name="page" value="1" size="30" maxlength="128" class="form-text">
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="no-archivo-web-result">
			<div class="clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item">
				<h2>{{ resultado['mensaje_error'] }}</h2>
				<ul>
					<li>La búsqueda permite el uso de operadores como "OR" y "AND" tanto en mayúsculas como minúsculas.</li>
					<li>Los operadores deben estar entre dos términos. Ej. Region or Cantabria</li>
					<li>Si coloca un operador al inicio, final o dos operadores consecutivos la búsqueda nos reportará un error. Ej. "and Region or Cantabria" ó "Region or or Cantabria"</li>
				</ul>
			</div>

		</div>
	</div>

{% else %}

	<div class="ps-fulltext-search-list ps-listado-box ps-listado-archivo-web">
		<div class="view-filters">
			<form class="views-exposed-form bef-exposed-form" action="" method="get" id="form-buscar-archivo-web">
				<div class="form--inline clearfix rs_skip rs_preserve">
					<div class="js-form-item form-item js-form-type-textfield form-type-textfield js-form-item-search-api-fulltext form-item-search-api-fulltext">
						<label for="ps-search-text-archivo-web">Buscar</label>
						<input placeholder="INTRODUZCA LA PALABRA DE BÚSQUEDA..." type="text" id="ps-search-text-archivo-web" name="buscar" value="" size="30" maxlength="128" class="form-text">
					</div>
					<div data-drupal-selector="edit-actions" class="form-actions js-form-wrapper form-wrapper" id="edit-actions">
						<input type="submit" id="ps-archivo-web-buscar" value="Buscar" class="button js-form-submit form-submit">
						<input type="submit" id="ps-archivo-web-reload" value="Buscar" class="button js-form-submit form-submit">
					</div>
					<div class="bef--secondary js-form-wrapper form-wrapper" data-drupal-selector="edit-secondary" id="edit-secondary" data-once="details">
						<div class="details-wrapper">
							<div class="title">
								<h2>BUSCAR POR:</H2>
							</div>
							{# <div class="js-form-item form-item js-form-type-checkbox form-type-checkbox">
								<input type="checkbox" id="ps-archivo-web-todos" checked="checked" name="todos">
								<label for="ps-archivo-web-todos">Todos</label>
							</div> #}
							<div class="js-form-item form-item js-form-type-checkbox form-type-checkbox">
								<input type="checkbox" id="ps-archivo-web-titulo" checked="checked" name="titulo">
								<label for="ps-archivo-web-titulo">Título</label>
							</div>
							<div class="js-form-item form-item js-form-type-checkbox form-type-checkbox">
								<input type="checkbox" id="ps-archivo-web-palabras-clave" name="palabras-clave">
								<label for="ps-archivo-web-palabras-clave">Palabras clave</label>
							</div>
							<div class="js-form-item form-item js-form-type-select form-type-select">
								<label for="ps-archivo-web-ordenarPor" name="ordenar-por">Ordenar por:</label>
								<select id="ordenarPor">
  									<option value="titulo_asc">Título asc</option>
									<option value="titulo_desc">Título des</option>
  									<option value="fecha_desc">Fecha des</option>
  									<option value="fecha_asc">Fecha asc</option>
								</select>
							</div>
							<summary class="ayuda-archivo-link" role="button" aria-controls="edit-secondary" aria-expanded="false" aria-pressed="false">
								<a href="/node/30916" target="_blank">

									<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 431.855 431.855" style="enable-background:new 0 0 431.855 431.855;" xml:space="preserve">
										<g>
											<path  d="M215.936,0C96.722,0,0.008,96.592,0.008,215.814c0,119.336,96.714,216.041,215.927,216.041
													c119.279,0,215.911-96.706,215.911-216.041C431.847,96.592,335.214,0,215.936,0z M231.323,335.962
													c-5.015,4.463-10.827,6.706-17.411,6.706c-6.812,0-12.754-2.203-17.826-6.617c-5.08-4.406-7.625-10.575-7.625-18.501
													c0-7.031,2.463-12.949,7.373-17.745c4.91-4.796,10.933-7.194,18.078-7.194c7.031,0,12.949,2.398,17.753,7.194
													c4.796,4.796,7.202,10.713,7.202,17.745C238.858,325.362,236.346,331.5,231.323,335.962z M293.856,180.934
													c-3.853,7.145-8.429,13.306-13.737,18.501c-5.292,5.194-14.81,13.924-28.548,26.198c-3.788,3.463-6.836,6.503-9.12,9.12
													c-2.284,2.626-3.991,5.023-5.105,7.202c-1.122,2.178-1.983,4.357-2.593,6.535c-0.61,2.17-1.528,5.999-2.772,11.469
													c-2.113,11.608-8.754,17.411-19.915,17.411c-5.804,0-10.681-1.894-14.656-5.69c-3.959-3.796-5.934-9.429-5.934-16.907
													c0-9.372,1.455-17.493,4.357-24.361c2.886-6.869,6.747-12.892,11.543-18.086c4.804-5.194,11.274-11.356,19.427-18.501
													c7.145-6.251,12.307-10.965,15.485-14.144c3.186-3.186,5.861-6.73,8.031-10.632c2.187-3.91,3.26-8.145,3.26-12.721
													c0-8.933-3.308-16.46-9.957-22.597c-6.641-6.137-15.209-9.21-25.703-9.21c-12.282,0-21.321,3.097-27.125,9.291
													c-5.804,6.194-10.705,15.314-14.729,27.369c-3.804,12.616-11.006,18.923-21.598,18.923c-6.251,0-11.526-2.203-15.826-6.609
													c-4.292-4.406-6.438-9.177-6.438-14.314c0-10.6,3.406-21.346,10.21-32.23c6.812-10.884,16.745-19.899,29.807-27.036
													c13.054-7.145,28.296-10.722,45.699-10.722c16.184,0,30.466,2.991,42.854,8.966c12.388,5.966,21.963,14.087,28.718,24.361
													c6.747,10.266,10.128,21.427,10.128,33.482C299.635,165.473,297.709,173.789,293.856,180.934z"/>
										</g>
									</svg>
								</a>
								<span class="summary"></span>
							</summary>
							<summary role="button" aria-controls="edit-secondary" aria-expanded="false" aria-pressed="false">
								<a href="http://www.dl-e.es/openwayback/wayback/index.jsp" target="_blank">
									<span>Buscar por URL</span>
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 14 14">
										<path id="External_Link" d="M18,4.466v4.2a.467.467,0,0,1-.933,0V5.593l-6.67,6.67a.467.467,0,0,1-.66-.66l6.67-6.67H13.334a.467.467,0,0,1,0-.933h4.2A.466.466,0,0,1,18,4.466ZM16.133,16.6V11a.467.467,0,1,0-.933,0v5.6a.467.467,0,0,1-.466.466H5.4a.467.467,0,0,1-.466-.466V7.267A.467.467,0,0,1,5.4,6.8H11a.467.467,0,1,0,0-.933H5.4A1.4,1.4,0,0,0,4,7.267V16.6A1.4,1.4,0,0,0,5.4,18h9.334a1.4,1.4,0,0,0,1.4-1.4Z" transform="translate(-4 -4)" fill="#b40d04"/>
									</svg>
								</a>
								<span class="summary"></span>
							</summary>
							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="materia">Materia</label>
								<input type="text" id="ps-materia" name="materia" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="materias-id">Materias-id</label>
								<input type="text" id="ps-materias-id" name="materias-id" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="ps-coleccion">coleccion</label>
								<input type="text" id="ps-coleccion" name="coleccion" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="colecciones-id">colecciones_id</label>
								<input type="text" id="ps-colecciones-id" name="colecciones-id" value="" size="30" maxlength="128" class="form-text">
							</div>

							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="ps-total-paginas">Total páginas</label>
								<input type="text" id="ps-total-paginas" name="total" value="{{ resultado['total'] }}" size="30" maxlength="128" class="form-text">
							</div>
							<div class="item-oculto js-form-item form-item js-form-type-textfield form-type-textfield ">
								<label for="ps-num-page">Página actual</label>
								<input type="text" id="ps-num-page" name="page" value="1" size="30" maxlength="128" class="form-text">
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		{% if resultado['total-resultados']|length  %}
			<div class="total-registros">
				<span>Resultados:
				</span>
				<span class="num">{{ resultado['total-resultados']|number_format(0, '.', '.')}}</span>
				{% if resultado['termino']|length %}
				<span> para la búsqueda </span>
				<span class="termino">{{ resultado['termino'] }}</span>
				{% endif %}
			</div>
		{% endif %}


		<div id="modal-archivo-web" class="modal-archivo">
  			<div class="modal-content">
    			<p>Los textos de menos de tres caracteres deben ir entrecomillados.</p>
				<span class="close-modal-web">Aceptar</span>
  			</div>
		</div>



		<div class="view-content">
			{% if resultado|length > 0 %}
				{% for field in resultado['registros'] %}
					<div class="view-row">

						{% if field.coleccion|length %}
							<div class="etiqueta-coleccion">Colección {{ field.coleccion }}</div>
						{% endif %}
						{# {% if field.tematica|length %}
																														<div class="etiqueta-materia">Materia:
																															{{ field.tematica }}</div>
																													{% endif %} #}


						{% if field.titulo|length %}
							<div class="titulo">{{ field.titulo }}</div>
						{% else %}
							<div class="titulo">Sin título</div>
						{% endif %}

						{% if field.url|length %}
							<div class="url">
								<div class="link" href="http://www.dl-e.es/openwayback/wayback/*/{{ field.url }}">{{ field.url }}</div>
							</div>
						{% endif %}
						{# {% if field.url_alternativa|length %}
																														<div class="url-alternativa">{{ field.url_alternativa }}</div>
																													{% endif %} #}
						<div class="palabras-claves">
							{% for palabra in field['palabras_clave']%}
								{% if palabra|length > 0 %}
									<span class="etiqueta">{{ palabra }}</span>
								{% endif %}
							{% endfor %}
						</div>
					</div>
				{% endfor %}
			{% endif %}
		</div>
		<div class="no-archivo-web-result">{{ "No se han encontrado resultados"|trans }}</div>
		<nav class="pager" role="navigation">
			<ul class="pager__items js-pager__items">
				<li class="inactive pager__item pager__item--previous">
					<span aria-hidden="true">Anterior</span>
				</li>
				<li class="pager__item pager__item--page">
					<span aria-hidden="true">Página</span>
					<span class="num-page">{{ resultado['page']|number_format(0, '.', '.') }}</span>
					<span aria-hidden="true">de</span>
					<span class="total-pages">{{ resultado['total']|number_format(0, '.', '.') }}</span>
				</li>
				<li class="pager__item pager__item--next">
					<span aria-hidden="true">Siguiente</span>
				</li>
			</ul>
		</nav>
	</div>
{% endif %}
